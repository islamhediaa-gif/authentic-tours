import{c as ee,r as d,E as k,j as t,t as S,h as te,G as v,i as G}from"./index-CH8mRu_9-v301.js";import{T as L}from"./trash-2-gL00B5Qr-v301.js";import{P as se}from"./plus-DMxY_0J8-v301.js";import{T as ae}from"./triangle-alert-C2QQsxGk-v301.js";import{R as re}from"./receipt-Bs4j3uFt-v301.js";import{P as oe}from"./pen-CLDoIvYH-v301.js";const le=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],ne=ee("user-x",le),me=({transactions:I,journalEntries:D,addTransaction:M,updateTransaction:_,deleteTransaction:B,treasuries:h,customers:j,programs:w,masterTrips:z,currentUser:u,searchTerm:O="",formatCurrency:c,costCenters:$,enableCostCenters:X,currencies:P,settings:x,initialEditingId:C,onClearInitialEdit:R})=>{const b=u?.permissions?.includes("HIDE_FINANCIAL_AMOUNTS"),q=u?.role==="BOOKING_EMPLOYEE",A=b||q,m=d.useMemo(()=>{const e={},a={};return(j||[]).forEach(r=>{r?.id&&(e[r.id]=r.openingBalanceInBase||0)}),(h||[]).forEach(r=>{r?.id&&(a[r.id]=r.openingBalance||0)}),(D||[]).forEach(r=>{r?.lines&&(r.lines||[]).forEach(o=>{o?.accountId&&(o.accountType==="CUSTOMER"&&e[o.accountId]!==void 0?e[o.accountId]+=(o.debit||0)-(o.credit||0):o.accountType==="TREASURY"&&a[o.accountId]!==void 0&&(a[o.accountId]+=(o.debit||0)-(o.credit||0)))})}),{customers:e,treasuries:a}},[j,h,D]),[i,N]=d.useState([]),[H,g]=d.useState(!1),[E,U]=d.useState(null),[Y,F]=d.useState(null),f=(I||[]).filter(e=>e?.category==="EXPENSE_GEN"||e?.category==="DOUBTFUL_DEBT").filter(e=>{if(!O)return!0;const a=O.toLowerCase();return(e?.description||"").toLowerCase().includes(a)||(e?.refNo||"").toLowerCase().includes(a)||(e?.expenseCategory||"").toLowerCase().includes(a)});d.useEffect(()=>{if(C){const e=(I||[]).find(a=>a?.id===C);e&&(F(e.id),setTimeout(()=>{const a=document.getElementById(`expense-${e.id}`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>F(null),3e3))},500)),R?.()}},[C,I,R]);const K=()=>{const e=f||[];i.length===e.length&&e.length>0?N([]):N(e.map(a=>a.id).filter(Boolean))},V=e=>{e&&N(a=>a.includes(e)?a.filter(r=>r!==e):[...a,e])},W=()=>{i.length!==0&&confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ${i.length} Ù…Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©ØŸ`)&&((i||[]).forEach(e=>{e&&B(e)}),N([]))},[n,T]=d.useState(!1),[s,l]=d.useState({category:k[0]||"",description:"",amount:"",currencyCode:x?.baseCurrency||"EGP",exchangeRate:"1",treasuryId:(h||[])[0]?.id||"",customerId:"",programId:"",masterTripId:"",date:new Date().toISOString().split("T")[0],costCenterId:""}),p=(j||[]).find(e=>e?.id===s.customerId),J=e=>{e.preventDefault();const a=parseFloat(s.amount);if(isNaN(a)||a<=0)return;const r=parseFloat(s.exchangeRate)||1,o=a*r;let y;if(n){if(!p)return;const Z=(m.customers||{})[p.id]||0;if(o>Z&&!E&&!confirm("ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠØ©. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ØŸ"))return;y={description:`Ø¥Ø¹Ø¯Ø§Ù… Ø¯ÙŠÙ† Ù…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡: Ù„Ù„Ø¹Ù…ÙŠÙ„ ${p.name||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`,amount:a,amountInBase:o,currencyCode:s.currencyCode||x?.baseCurrency||"EGP",exchangeRate:r,type:"EXPENSE",category:"DOUBTFUL_DEBT",date:s.date||new Date().toISOString().split("T")[0],relatedEntityId:s.customerId,relatedEntityType:"CUSTOMER"}}else y={description:(s.description||"").includes(": ")?s.description:`${s.category}: ${s.description}`,amount:a,amountInBase:o,currencyCode:s.currencyCode||x?.baseCurrency||"EGP",exchangeRate:r,type:"EXPENSE",category:"EXPENSE_GEN",expenseCategory:s.category,date:s.date||new Date().toISOString().split("T")[0],treasuryId:s.treasuryId,programId:s.programId||void 0,masterTripId:s.masterTripId||void 0,costCenterId:s.costCenterId||void 0};E?_(E,y):M(y),l({...s,description:"",amount:"",customerId:"",programId:"",masterTripId:"",costCenterId:""}),g(!1),U(null)},Q=e=>{e&&(U(e.id),T(e.category==="DOUBTFUL_DEBT"),l({category:e.expenseCategory||k[0]||"",description:(e.description||"").includes(": ")?e.description.split(": ")[1]:e.description||"",amount:(e.amount||0).toString(),currencyCode:e.currencyCode||x?.baseCurrency||"EGP",exchangeRate:e.exchangeRate?.toString()||"1",treasuryId:e.treasuryId||(h||[])[0]?.id||"",customerId:e.relatedEntityId||"",programId:e.programId||"",masterTripId:e.masterTripId||"",costCenterId:e.costCenterId||"",date:e.date||new Date().toISOString().split("T")[0]}),g(!0))};return t.jsxs("div",{className:"space-y-8 pb-10",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center bg-white p-6 rounded-3xl shadow-sm border border-slate-200 gap-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-4 bg-indigo-600 text-white rounded-2xl shadow-lg shadow-indigo-200 transition-transform duration-500",children:t.jsx(S,{size:24,strokeWidth:2})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª ÙˆØ§Ù„Ø¯ÙŠÙˆÙ†"}),t.jsx("p",{className:"text-indigo-600 text-opacity-70 font-bold text-xs mt-1 uppercase tracking-widest",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.length>0&&u.role==="ADMIN"&&t.jsxs("button",{onClick:W,className:"bg-rose-50 text-rose-600 px-6 py-3 rounded-2xl font-bold flex items-center gap-3 shadow-sm hover:bg-rose-100 transition-all duration-300 transform active:scale-95",children:[t.jsx(L,{size:20}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"block text-[10px] opacity-70",children:"Ø¥Ø¬Ø±Ø§Ø¡ Ø¬Ù…Ø§Ø¹ÙŠ"}),t.jsxs("span",{className:"text-sm",children:["Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø¯Ø¯ (",i.length,")"]})]})]}),t.jsxs("button",{onClick:()=>{T(!0),g(!0)},className:"group bg-rose-900 text-white px-6 py-3 rounded-2xl font-bold flex items-center gap-3 shadow-sm hover:bg-rose-800 transition-all duration-300 transform active:scale-95",children:[t.jsx(ne,{size:20,className:"text-rose-200"}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"block text-[10px] opacity-70 uppercase tracking-widest font-black",children:"Ø¯ÙŠÙˆÙ† Ù…Ø¹Ø¯ÙˆÙ…Ø©"}),t.jsx("span",{className:"text-sm",children:"Ø¥Ø¹Ø¯Ø§Ù… Ø¯ÙŠÙ†"})]})]}),t.jsxs("button",{onClick:()=>{T(!1),g(!0)},className:"group bg-rose-600 text-white px-6 py-3 rounded-2xl font-bold flex items-center gap-3 shadow-sm hover:bg-rose-700 transition-all duration-300 transform active:scale-95",children:[t.jsx(se,{size:20}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"block text-[10px] opacity-70 uppercase tracking-widest font-black",children:"ØªØ³Ø¬ÙŠÙ„ Ù…Ø§Ù„ÙŠ"}),t.jsx("span",{className:"text-sm",children:"Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ"})]})]})]})]}),H&&t.jsxs("div",{className:`bg-white p-8 rounded-3xl border-b-8 ${n?"border-rose-900":"border-rose-600"} shadow-xl animate-in fade-in zoom-in duration-300`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${n?"bg-rose-900 text-rose-200":"bg-rose-600 text-white"}`,children:n?t.jsx(ae,{size:20}):t.jsx(re,{size:20})}),t.jsx("h3",{className:"text-xl font-bold text-slate-900",children:n?"Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¯ÙŠÙ† Ù…Ø´ÙƒÙˆÙƒ ÙÙŠ ØªØ­ØµÙŠÙ„Ù‡":"ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ±ÙˆÙ ØªØ´ØºÙŠÙ„ÙŠ Ø¬Ø¯ÙŠØ¯"})]}),t.jsx("button",{onClick:()=>g(!1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-slate-100 text-slate-400 hover:bg-rose-600 hover:text-white transition-all duration-300",children:"âœ•"})]}),t.jsxs("form",{onSubmit:J,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500 px-1",children:"Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ØªØ¹Ø«Ø±"}),t.jsxs("select",{required:!0,className:"p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-900 outline-none focus:ring-2 focus:ring-slate-900 ring-opacity-20 focus:border-slate-900 transition-all",value:s.customerId,onChange:e=>l({...s,customerId:e.target.value}),children:[t.jsx("option",{value:"",className:"text-slate-400 bg-white",children:"-- Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ --"}),(j||[]).filter(e=>e&&(m.customers[e.id]||0)>0).map(e=>t.jsxs("option",{value:e.id,className:"text-slate-900 bg-white font-bold",children:[e.name," (Ù…Ø¯ÙŠÙˆÙ†ÙŠØ©: ",b?"****":c(m.customers[e.id]||0),")"]},e.id))]})]}):t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500 px-1",children:"Ø¨Ù†Ø¯ Ø§Ù„Ù…ØµØ±ÙˆÙ"}),t.jsx("select",{className:"p-3 bg-slate-50 rounded-xl font-bold text-slate-900 outline-none focus:ring-2 focus:ring-rose-500 ring-opacity-20 border border-slate-200 focus:border-rose-500 transition-all",value:s.category,onChange:e=>l({...s,category:e.target.value}),children:(k||[]).map(e=>t.jsx("option",{value:e,className:"text-slate-900 bg-white font-bold",children:e},e))})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500 px-1",children:"Ø§Ù„Ø¹Ù…Ù„Ø©"}),t.jsx("select",{className:"p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-900 outline-none focus:ring-2 focus:ring-rose-500 ring-opacity-20 focus:border-rose-500 transition-all",value:s.currencyCode,onChange:e=>{const a=e.target.value,r=(P||[]).find(o=>o?.code===a)?.rateToMain||1;l({...s,currencyCode:a,exchangeRate:r.toString()})},children:(P||[]).map(e=>t.jsxs("option",{value:e.code,className:"font-bold",children:[e.name," (",e.code,")"]},e.code))})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500 px-1",children:"Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù"}),t.jsx("input",{type:"number",step:"any",disabled:s.currencyCode===(x?.baseCurrency||"EGP"),className:"p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-center text-slate-900 disabled:opacity-50 transition-all outline-none focus:ring-2 focus:ring-rose-500 ring-opacity-20 focus:border-rose-500",value:s.currencyCode===(x?.baseCurrency||"EGP")?"1":s.exchangeRate,onChange:e=>l({...s,exchangeRate:e.target.value})})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500 px-1",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",required:!0,placeholder:n&&p?`Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: ${b?"****":c(m.customers[p.id]||0)}`:"0",className:"w-full p-3 bg-slate-50 rounded-xl font-bold text-lg text-slate-900 outline-none focus:ring-2 focus:ring-rose-500 ring-opacity-20 border border-slate-200 focus:border-rose-500 transition-all placeholder:text-slate-300",value:s.amount,onChange:e=>l({...s,amount:e.target.value})}),t.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-[10px] uppercase tracking-tighter",children:s.currencyCode})]}),s.currencyCode!==(x?.baseCurrency||"EGP")&&t.jsxs("p",{className:"text-[10px] font-bold text-indigo-600 px-3 mt-1",children:["Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„: ",c((parseFloat(s.amount)||0)*(parseFloat(s.exchangeRate)||1))]}),n&&p&&t.jsxs("p",{className:"text-[10px] font-bold text-amber-600 px-3 flex items-center gap-2 bg-amber-50 py-1.5 rounded-lg mt-1 w-fit",children:[t.jsx(te,{size:12})," Ø±ØµÙŠØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ÙØªÙˆØ­: ",b?"****":c(m.customers[p.id]||0)]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500 px-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙŠØ¯"}),t.jsx("input",{type:"date",required:!0,className:"p-3 bg-slate-50 rounded-xl font-bold text-slate-900 outline-none focus:ring-2 focus:ring-rose-500 ring-opacity-20 border border-slate-200 focus:border-rose-500 transition-all",value:s.date,onChange:e=>l({...s,date:e.target.value})})]}),!n&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500 px-1",children:"Ù…ØµØ¯Ø± Ø§Ù„Ø³ÙŠÙˆÙ„Ø© (Ø§Ù„Ø®Ø²ÙŠÙ†Ø©)"}),t.jsx("select",{className:"p-3 bg-slate-50 rounded-xl font-bold text-slate-900 outline-none focus:ring-2 focus:ring-rose-500 ring-opacity-20 border border-slate-200 focus:border-rose-500 transition-all",value:s.treasuryId,onChange:e=>l({...s,treasuryId:e.target.value}),children:(h||[]).map(e=>t.jsxs("option",{value:e.id,className:"text-slate-900 bg-white font-bold",children:[e.type==="CUSTODY"?"ğŸ“¦ ":e.type==="BANK"?"ğŸ¦ ":"ğŸ’° ",e.name," (",e.type==="CUSTODY"?"Ø¹Ù‡Ø¯Ø©":e.type==="BANK"?"Ø¨Ù†Ùƒ":"Ø®Ø²ÙŠÙ†Ø©",") - ",A?"****":c(m.treasuries[e.id]||0)]},e.id))})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("label",{className:"text-xs font-bold text-slate-500 px-1 flex items-center gap-2",children:[t.jsx(v,{size:14,className:"text-slate-400"})," Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø³ÙŠØ§Ø­ÙŠ"]}),t.jsx(G,{options:(w||[]).map(e=>({id:e.id,name:e.name,subtext:e.type})),value:s.programId,onChange:e=>{const a=(w||[]).find(r=>r.id===e);l({...s,programId:e,masterTripId:a?.masterTripId||s.masterTripId})},placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù..."})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("label",{className:"text-xs font-bold text-slate-500 px-1 flex items-center gap-2",children:[t.jsx(v,{size:14,className:"text-slate-400"})," Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø±Ø­Ù„Ø© ÙƒØ¨Ø±Ù‰"]}),t.jsx(G,{options:(z||[]).map(e=>({id:e.id,name:e.name,subtext:e.date})),value:s.masterTripId,onChange:e=>l({...s,masterTripId:e}),placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ø±Ø­Ù„Ø©..."})]}),X&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("label",{className:"text-xs font-bold text-amber-600 px-1 flex items-center gap-2",children:[t.jsx(S,{size:14})," Ù…Ø±ÙƒØ² Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªØ­Ù„ÙŠÙ„ÙŠ"]}),t.jsxs("select",{className:"p-3 bg-amber-50 bg-opacity-50 border border-amber-100 rounded-xl font-bold text-slate-900 outline-none focus:ring-2 focus:ring-amber-500 ring-opacity-20 focus:border-amber-500 transition-all",value:s.costCenterId,onChange:e=>l({...s,costCenterId:e.target.value}),children:[t.jsx("option",{value:"",className:"text-slate-400 bg-white font-bold",children:"-- Ø¨Ø¯ÙˆÙ† Ù…Ø±ÙƒØ² ØªÙƒÙ„ÙØ© --"}),($||[]).filter(e=>e&&e.isActive).map(e=>t.jsx("option",{value:e.id,className:"text-slate-900 bg-white font-bold",children:e.name},e.id))]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500 px-1",children:"ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© / Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"}),t.jsx("input",{required:!0,placeholder:n?"Ø¨Ø±Ø¬Ø§Ø¡ ØªÙˆØ¶ÙŠØ­ Ø³Ø¨Ø¨ Ø¥Ø¹Ø¯Ø§Ù… Ø§Ù„Ø¯ÙŠÙ† ÙˆØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„...":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ØµØ±ÙˆÙ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠ...",className:"p-3 bg-slate-50 rounded-xl font-bold text-slate-900 outline-none placeholder:text-slate-300 border border-slate-200 focus:border-rose-500 focus:ring-2 focus:ring-rose-500 ring-opacity-20 transition-all",value:s.description,onChange:e=>l({...s,description:e.target.value})})]}),t.jsxs("div",{className:"md:col-span-3 flex justify-end gap-4 pt-6 border-t border-slate-100",children:[t.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-6 py-2 text-slate-400 font-bold hover:text-rose-600 transition-colors text-xs",children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©"}),t.jsx("button",{type:"submit",className:`${n?"bg-slate-900 shadow-lg shadow-slate-200":"bg-rose-600 shadow-lg shadow-rose-200"} text-white px-10 py-3 rounded-2xl font-bold hover:scale-[1.02] active:scale-95 transition-all duration-300`,children:n?"ØªØ£ÙƒÙŠØ¯ Ø¥Ø¹Ø¯Ø§Ù… Ø§Ù„Ø¯ÙŠÙ†":"Ø­ÙØ¸ Ø§Ù„Ù…ØµØ±ÙˆÙ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-right border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-900 text-white",children:[u.role==="ADMIN"&&t.jsx("th",{className:"px-6 py-4 text-center w-10",children:t.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer",checked:(f||[]).length>0&&i.length===(f||[]).length,onChange:K})}),t.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase tracking-widest",children:"Ø§Ù„Ù…Ø±Ø¬Ø¹"}),t.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase tracking-widest text-right",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),t.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase tracking-widest text-right",children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù„ÙØ¦Ø©"}),t.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase tracking-widest text-center",children:"Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ"}),t.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase tracking-widest text-left",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ØµØ§ÙÙŠ"}),t.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase tracking-widest text-center",children:"ØªØ­ÙƒÙ…"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:(f||[]).map(e=>t.jsxs("tr",{id:`expense-${e.id}`,className:`hover:bg-slate-50 group transition-all duration-300 ${Y===e.id?"ring-4 ring-indigo-500 border-indigo-500 bg-indigo-50/30 scale-[1.002] z-10 shadow-2xl":i.includes(e.id)?"bg-indigo-50 bg-opacity-30":""}`,children:[u.role==="ADMIN"&&t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer",checked:i.includes(e.id),onChange:()=>V(e.id)})}),t.jsx("td",{className:"px-6 py-4",children:e.refNo?t.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(e.refNo);const a=document.getElementById(`ref-exp-${e.id}`);if(a){const r=a.innerText;a.innerText="ØªÙ… Ø§Ù„Ù†Ø³Ø®",setTimeout(()=>{a.innerText=r},1e3)}},id:`ref-exp-${e.id}`,className:"text-rose-600 text-[10px] font-bold font-mono bg-rose-50 px-2 py-1 rounded-md border border-rose-100 hover:bg-rose-100 transition-all",title:"Ø§Ø¶ØºØ· Ù„Ù„Ù†Ø³Ø® ÙˆØ§Ù„Ø¨Ø­Ø«",children:["#",e.refNo]}):t.jsxs("span",{className:"text-rose-600 text-[10px] font-bold font-mono bg-rose-50 px-2 py-1 rounded-md",children:["#",(e.id||"").slice(-6).toUpperCase()]})}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsx("span",{className:"text-slate-500 text-xs font-bold",children:e.date?new Date(e.date).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):""})}),t.jsxs("td",{className:"px-6 py-4 text-right",children:[t.jsx("p",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors",children:e.description||""}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-1.5",children:[t.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase bg-slate-100 px-2 py-0.5 rounded-md tracking-widest",children:e.expenseCategory||"Ø¯ÙŠÙ† Ù…Ø¹Ø¯ÙˆÙ…"}),e.programId&&t.jsxs("span",{className:"text-[10px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-md border border-indigo-100 flex items-center gap-1 font-bold uppercase tracking-widest",children:[t.jsx(v,{size:10})," ",(w||[]).find(a=>a?.id===e.programId)?.name||"Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø°ÙˆÙ"]}),e.masterTripId&&t.jsxs("span",{className:"text-[10px] bg-amber-50 text-amber-600 px-2 py-0.5 rounded-md border border-amber-100 flex items-center gap-1 font-bold uppercase tracking-widest",children:[t.jsx(v,{size:10})," ",(z||[]).find(a=>a?.id===e.masterTripId)?.name||"Ø±Ø­Ù„Ø© Ù…Ø­Ø°ÙˆÙØ©"]})]})]}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest ${e.category==="DOUBTFUL_DEBT"?"bg-amber-100 text-amber-800":"bg-rose-50 text-rose-600"}`,children:e.category==="DOUBTFUL_DEBT"?"Ø¯ÙŠÙ† Ù…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡":"Ù…ØµØ±ÙˆÙ ØªØ´ØºÙŠÙ„ÙŠ"})}),t.jsx("td",{className:"px-6 py-4 text-left",children:t.jsx("p",{className:"text-xl font-bold text-rose-600 tracking-tight tabular-nums",children:e.category==="DOUBTFUL_DEBT"?b?"****":c(e.amountInBase||e.amount||0):A?"****":c(e.amountInBase||e.amount||0)})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsxs("div",{className:"flex justify-center gap-2",children:[t.jsx("button",{onClick:()=>Q(e),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-slate-50 text-slate-400 hover:bg-amber-500 hover:text-white transition-all duration-300",children:t.jsx(oe,{size:16})}),u.role==="ADMIN"&&t.jsx("button",{onClick:()=>B(e.id),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-slate-50 text-slate-400 hover:bg-rose-600 hover:text-white transition-all duration-300",children:t.jsx(L,{size:16})})]})})]},e.id))})]})}),f.length===0&&t.jsxs("div",{className:"py-20 text-center flex flex-col items-center",children:[t.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-2xl flex items-center justify-center mb-4",children:t.jsx(S,{size:32,className:"text-slate-200"})}),t.jsx("p",{className:"font-bold text-slate-400 text-sm",children:"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø®Ø§Ù„Ù ØªÙ…Ø§Ù…Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"})]})]})]})};export{me as default};
