import{r as n,k as Z,j as s,h as O,i as y,e as ee,l as se}from"./index-D5SAcJeb.js";import{C as v}from"./clipboard-list-C_bleMRb.js";import{T as D}from"./trash-2-DM2JoFNM.js";import{P as te}from"./plus-BF-0wA7Y.js";import{T as F}from"./tag-BL2AETyq.js";import{P as ae}from"./percent-BheMet7L.js";import{A as le}from"./award-C3CFWn7Q.js";import{C as E}from"./calendar-D1O96ZoP.js";import{P as oe}from"./pen-D_z02ClP.js";const ge=({transactions:h,journalEntries:P,addTransaction:B,updateTransaction:U,deleteTransaction:k,customers:g,suppliers:I,treasuries:V,currencies:f,employees:c,programs:C,masterTrips:_,currentUser:d,searchTerm:w="",formatCurrency:p,costCenters:q,enableCostCenters:G,initialEditingId:R,onClearInitialEdit:A,settings:x})=>{const m=d?.permissions?.includes("HIDE_FINANCIAL_AMOUNTS"),j=d?.role==="BOOKING_EMPLOYEE",z=m||j,S=n.useMemo(()=>{const e={},a={};return(g||[]).forEach(o=>{o?.id&&(e[o.id]=o.openingBalanceInBase||0)}),(I||[]).forEach(o=>{o?.id&&(a[o.id]=o.openingBalanceInBase||0)}),(P||[]).forEach(o=>{o&&o.lines&&(o.lines||[]).forEach(i=>{i&&i.accountType==="CUSTOMER"&&e[i.accountId]!==void 0?e[i.accountId]+=(i.debit||0)-(i.credit||0):i&&i.accountType==="SUPPLIER"&&a[i.accountId]!==void 0&&(a[i.accountId]+=(i.credit||0)-(i.debit||0))})}),{customers:e,suppliers:a}},[g,I,P]),[H,T]=n.useState(!1),[u,N]=n.useState([]),[r,L]=n.useState(null),[Y,M]=n.useState(null);n.useEffect(()=>{if(R){const e=(h||[]).find(a=>a&&a.id===R);e&&(M(e.id),setTimeout(()=>{const a=document.getElementById(`service-${e.id}`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>M(null),3e3))},500)),A?.()}},[R,h,A]);const[t,l]=n.useState({serviceName:"",customerId:"",supplierId:"",supplierType:"SUPPLIER",employeeId:"",currencyCode:x?.baseCurrency||"",exchangeRate:"1",purchasePrice:"",sellingPrice:"",discount:"0",employeeCommissionRate:"",commissionAmount:"",notes:"",date:new Date().toISOString().split("T")[0],costCenterId:"",applyCommission:!0,programId:"",componentId:"",masterTripId:""});n.useEffect(()=>{if(!r&&x?.baseCurrency){const e=(f||[]).find(a=>a.code===t.currencyCode);e&&l(a=>({...a,exchangeRate:e.rateToMain.toString()}))}},[t.currencyCode,f,r,x?.baseCurrency]),n.useEffect(()=>{if(j&&!t.employeeId&&!r&&d.employeeId)l(e=>({...e,employeeId:d.employeeId||""}));else if(j&&!t.employeeId&&!r){const e=(c||[]).find(a=>Z(a.name,d.name));e&&l(a=>({...a,employeeId:e.id}))}},[j,d,c,t.employeeId,r]),n.useEffect(()=>{if(t.employeeId&&!r&&!t.employeeCommissionRate){const e=(c||[]).find(a=>a.id===t.employeeId);e&&l(a=>({...a,employeeCommissionRate:e.commissionRate.toString()}))}},[t.employeeId,c,r]);const K=e=>{L(e.id),l({serviceName:e.description||"",customerId:e.relatedEntityId||"",supplierId:e.supplierId||"",supplierType:e.supplierType||"SUPPLIER",employeeId:e.employeeId||"",currencyCode:e.currencyCode||x?.baseCurrency||"",exchangeRate:(e.exchangeRate||1).toString(),purchasePrice:(e.purchasePrice||0).toString(),sellingPrice:(e.sellingPrice||0).toString(),discount:(e.discount||0).toString(),employeeCommissionRate:(e.employeeCommissionRate||0).toString(),commissionAmount:e.commissionAmount?.toString()||"",applyCommission:e.applyCommission??!0,notes:e.accommodation||"",date:e.date||new Date().toISOString().split("T")[0],costCenterId:e.costCenterId||"",programId:e.programId||"",componentId:e.componentId||"",masterTripId:e.masterTripId||""}),T(!0)},J=e=>{e.preventDefault();const a={description:`${t.serviceName}`,amount:0,currencyCode:t.currencyCode,exchangeRate:parseFloat(t.exchangeRate||"1"),type:"INCOME",category:"GENERAL_SERVICE",date:t.date,relatedEntityId:t.customerId,relatedEntityType:"CUSTOMER",supplierId:t.supplierId,supplierType:t.supplierType,employeeId:t.employeeId,employeeCommissionRate:parseFloat(t.employeeCommissionRate||"0"),commissionAmount:parseFloat(t.commissionAmount||"0"),applyCommission:t.applyCommission,accommodation:t.notes,purchasePrice:parseFloat(t.purchasePrice||"0"),sellingPrice:parseFloat(t.sellingPrice||"0"),discount:parseFloat(t.discount||"0"),amountInBase:(parseFloat(t.sellingPrice||"0")-parseFloat(t.discount||"0"))*parseFloat(t.exchangeRate||"1"),costCenterId:t.costCenterId||void 0,programId:t.programId||void 0,componentId:t.componentId||void 0,masterTripId:t.masterTripId||void 0};r?U(r,a):B(a),$()},$=()=>{T(!1),L(null),l({serviceName:"",customerId:"",supplierId:"",supplierType:"SUPPLIER",employeeId:"",currencyCode:x?.baseCurrency||"",exchangeRate:"1",purchasePrice:"",sellingPrice:"",discount:"0",employeeCommissionRate:"",commissionAmount:"",notes:"",date:new Date().toISOString().split("T")[0],costCenterId:"",applyCommission:!0,programId:"",componentId:"",masterTripId:""})},Q=()=>{u.length===b.length?N([]):N(b.map(e=>e.id))},W=e=>{N(a=>a.includes(e)?a.filter(o=>o!==e):[...a,e])},X=()=>{confirm(`هل أنت متأكد من حذف ${u.length} من العمليات المحددة؟`)&&(u.forEach(e=>k(e)),N([]))},b=n.useMemo(()=>(h||[]).filter(e=>e&&e.category==="GENERAL_SERVICE").filter(e=>{if(!w)return!0;const a=w.toLowerCase(),o=(g||[]).find(i=>i&&i.id===e.relatedEntityId);return(e.description||"").toLowerCase().includes(a)||(e.refNo||"").toLowerCase().includes(a)||(o?.name||"").toLowerCase().includes(a)}).sort((e,a)=>(a?.date||"").localeCompare(e?.date||"")),[h,w,g]);return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"relative overflow-hidden bg-slate-900 p-8 rounded-3xl shadow-2xl border border-slate-800",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 bg-opacity-10 rounded-full -mr-32 -mt-32 blur-3xl"}),s.jsxs("div",{className:"relative flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-500 bg-opacity-20 backdrop-blur-md rounded-2xl flex items-center justify-center border border-indigo-500 border-opacity-30",children:s.jsx(v,{size:32,className:"text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:"الخدمات اللوجستية"}),s.jsx("p",{className:"text-indigo-400 text-opacity-80 font-medium text-sm",children:"إدارة كافة الخدمات، التأشيرات ووسائل النقل"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[u.length>0&&d.role==="ADMIN"&&s.jsxs("button",{onClick:X,className:"bg-rose-500 text-white px-8 py-4 rounded-2xl font-bold flex items-center gap-3 shadow-lg shadow-rose-500/20 hover:bg-rose-400 transition-all active:scale-95 animate-in zoom-in",children:[s.jsx(D,{size:20})," حذف (",u.length,")"]}),s.jsxs("button",{onClick:()=>T(!0),className:"bg-indigo-600 text-white px-8 py-4 rounded-2xl font-bold flex items-center gap-3 shadow-lg shadow-indigo-600/20 hover:bg-indigo-500 transition-all active:scale-95",children:[s.jsx(te,{size:20})," إضافة خدمة جديدة"]})]})]})]}),H&&s.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-200 shadow-xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"mb-8 flex items-center gap-3",children:[s.jsx("div",{className:"w-1.5 h-8 bg-indigo-600 rounded-full"}),s.jsx("h3",{className:"text-xl font-bold text-slate-900",children:r?"تعديل بيانات الخدمة":"تسجيل طلب خدمة جديد"})]}),s.jsxs("form",{onSubmit:J,className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(v,{size:14,className:"text-indigo-600"})," نوع الخدمة"]}),s.jsx("input",{required:!0,className:"w-full p-4 bg-slate-50 border border-slate-200 focus:border-indigo-600 focus:ring-4 focus:ring-indigo-600 ring-opacity-5 rounded-2xl font-bold text-lg text-slate-900 outline-none transition-all",placeholder:"مثال: تأشيرة زيارة / نقل مطار",value:t.serviceName,onChange:e=>l({...t,serviceName:e.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(O,{size:14,className:"text-indigo-600"})," العميل"]}),s.jsx(y,{options:(g||[]).map(e=>({id:e.id,name:e.name,subtext:`الرصيد: ${m?"****":p(S.customers[e.id]||0)}`})),value:t.customerId,onChange:e=>l({...t,customerId:e}),placeholder:"اختر العميل"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(ee,{size:14,className:"text-indigo-600"})," جهة الشراء"]}),s.jsx("div",{className:"flex bg-slate-100 p-0.5 rounded-lg gap-0.5",children:["SUPPLIER","CUSTOMER","TREASURY"].map(e=>s.jsx("button",{type:"button",onClick:()=>l({...t,supplierType:e,supplierId:""}),className:`px-2 py-0.5 rounded-md text-[9px] font-bold transition-all ${t.supplierType===e?"bg-white shadow-sm text-indigo-600":"text-slate-400 hover:text-slate-600"}`,children:e==="SUPPLIER"?"مورد":e==="CUSTOMER"?"عميل":"خزينة"},e))})]}),s.jsx(y,{options:t.supplierType==="SUPPLIER"?(I||[]).map(e=>({id:e.id,name:e.company,subtext:`الرصيد: ${m?"****":p(S.suppliers[e.id]||0)}`})):t.supplierType==="CUSTOMER"?(g||[]).map(e=>({id:e.id,name:e.name,subtext:`الرصيد: ${m?"****":p(S.customers[e.id]||0)}`})):(V||[]).map(e=>({id:e.id,name:e.name,subtext:`الرصيد: ${m?"****":p(e.balance)}`})),value:t.supplierId,onChange:e=>l({...t,supplierId:e}),placeholder:`اختر ${t.supplierType==="SUPPLIER"?"المورد":t.supplierType==="CUSTOMER"?"العميل":"الخزينة"}`})]})]}),s.jsxs("div",{className:"space-y-2 bg-slate-50 p-4 rounded-2xl border border-slate-200",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(se,{className:"text-indigo-600",size:14})," الموظف المسؤول"]}),s.jsx(y,{options:(c||[]).map(e=>({id:e.id,name:e.name,subtext:e.position})),value:t.employeeId,onChange:e=>{const a=(c||[]).find(o=>o.id===e);l({...t,employeeId:e,employeeCommissionRate:a?a.commissionRate.toString():t.employeeCommissionRate})},placeholder:"اختر الموظف المسؤول"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 bg-slate-50 p-4 rounded-2xl border border-slate-200",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(F,{className:"text-indigo-600",size:14})," ربط ببرنامج (اختياري)"]}),s.jsx(y,{options:(C||[]).map(e=>({id:e.id,name:e.name,subtext:`${e.type} - ${e.date}`})),value:t.programId,onChange:e=>{(C||[]).find(a=>a.id===e),l({...t,programId:e,componentId:""})},placeholder:"اختر البرنامج"})]}),t.programId&&s.jsxs("div",{className:"space-y-2 bg-slate-50 p-4 rounded-2xl border border-slate-200 animate-in fade-in slide-in-from-right-4",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(v,{className:"text-indigo-600",size:14})," المكون المرتبط"]}),s.jsxs("select",{className:"w-full p-4 bg-white border border-slate-200 rounded-2xl font-bold text-sm text-slate-900 outline-none focus:border-indigo-600 transition-all",value:t.componentId,onChange:e=>l({...t,componentId:e.target.value}),children:[s.jsx("option",{value:"",children:"اختر المكون..."}),((C||[]).find(e=>e.id===t.programId)?.components||[]).map(e=>s.jsxs("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-2xl border border-slate-200",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(ae,{className:"text-indigo-600",size:14})," نسبة العمولة %"]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",checked:t.applyCommission,onChange:e=>l({...t,applyCommission:e.target.checked})}),s.jsx("span",{className:"text-[10px] font-bold text-slate-400 group-hover:text-indigo-600 transition-colors",children:"تفعيل العمولة"})]})]}),s.jsx("input",{type:"number",step:"0.1",className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-900 focus:border-indigo-500 outline-none text-center",value:t.employeeCommissionRate,onChange:e=>l({...t,employeeCommissionRate:e.target.value,commissionAmount:""})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(le,{className:"text-emerald-600",size:14})," مبلغ عمولة محدد"]}),s.jsx("input",{type:"number",className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-900 focus:border-emerald-500 outline-none text-center",value:t.commissionAmount,onChange:e=>l({...t,commissionAmount:e.target.value,employeeCommissionRate:""}),placeholder:"مبلغ ثابت"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-2xl border border-slate-200",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(v,{className:"text-indigo-600",size:14})," الرحلة المرتبطة (Trip)"]}),s.jsxs("select",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-900 focus:border-indigo-500 outline-none",value:t.masterTripId,onChange:e=>l({...t,masterTripId:e.target.value}),children:[s.jsx("option",{value:"",children:"بدون رحلة محددة"}),(_||[]).filter(e=>!e.isVoided).map(e=>s.jsxs("option",{value:e.id,children:[e.name," - ",new Date(e.date).toLocaleDateString("ar-EG")]},e.id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(F,{className:"text-slate-600",size:14})," مركز التكلفة"]}),s.jsxs("select",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-900 focus:border-slate-400 outline-none disabled:opacity-50",value:t.costCenterId,disabled:!G,onChange:e=>l({...t,costCenterId:e.target.value}),children:[s.jsx("option",{value:"",children:"بدون مركز تكلفة"}),(q||[]).filter(e=>e.isActive).map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4 bg-slate-50 p-4 rounded-2xl border border-slate-200",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[s.jsx(E,{className:"text-slate-600",size:14})," تاريخ الخدمة"]}),s.jsx("input",{type:"date",required:!0,className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-900 focus:border-indigo-500 outline-none",value:t.date,onChange:e=>l({...t,date:e.target.value})})]})})]}),s.jsx("div",{className:"p-6 bg-slate-900 rounded-3xl border border-slate-800 shadow-xl",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-rose-400 uppercase text-center block",children:"سعر التكلفة"}),s.jsx("input",{type:"number",required:!0,className:"w-full p-4 bg-slate-800 border border-slate-700 focus:border-rose-500 rounded-2xl font-bold text-2xl text-center text-rose-400 outline-none transition-all",value:t.purchasePrice,onChange:e=>l({...t,purchasePrice:e.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-emerald-400 uppercase text-center block",children:"سعر البيع"}),s.jsx("input",{type:"number",required:!0,className:"w-full p-4 bg-slate-800 border border-slate-700 focus:border-emerald-500 rounded-2xl font-bold text-2xl text-center text-emerald-400 outline-none transition-all",value:t.sellingPrice,onChange:e=>l({...t,sellingPrice:e.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-rose-500 uppercase text-center block",children:"خصم مسموح"}),s.jsx("input",{type:"number",className:"w-full p-4 bg-slate-800 border border-slate-700 focus:border-rose-500 rounded-2xl font-bold text-2xl text-center text-rose-500 outline-none transition-all",value:t.discount,onChange:e=>l({...t,discount:e.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase text-center block",children:"العملة"}),s.jsx("select",{className:"w-full p-4 bg-slate-800 border border-slate-700 focus:border-slate-500 rounded-2xl font-bold text-xl text-center text-white outline-none",value:t.currencyCode,onChange:e=>{const a=e.target.value,o=(f||[]).find(i=>i.code===a)?.rateToMain||1;l({...t,currencyCode:a,exchangeRate:o.toString()})},children:(f||[]).map(e=>s.jsx("option",{value:e.code,children:e.code},e.code))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase text-center block",children:"سعر الصرف"}),s.jsx("input",{type:"number",step:"any",disabled:t.currencyCode===x?.baseCurrency,className:"w-full p-4 bg-slate-800 border border-slate-700 focus:border-slate-500 rounded-2xl font-bold text-xl text-center text-white outline-none disabled:opacity-50",value:t.currencyCode===x?.baseCurrency?"1":t.exchangeRate,onChange:e=>l({...t,exchangeRate:e.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase text-center block",children:"التاريخ"}),s.jsxs("div",{className:"relative",children:[s.jsx(E,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),s.jsx("input",{type:"date",className:"w-full p-4 pr-4 bg-slate-800 border border-slate-700 focus:border-slate-500 rounded-2xl font-bold text-base text-center text-white outline-none",value:t.date,onChange:e=>l({...t,date:e.target.value})})]})]})]})}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-slate-100",children:[s.jsx("button",{type:"button",onClick:$,className:"px-8 py-3 font-bold text-slate-500 hover:text-rose-500 hover:bg-rose-50 rounded-xl transition-all",children:"إلغاء"}),s.jsx("button",{type:"submit",className:"bg-slate-900 text-indigo-400 px-16 py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-slate-800 transition-all active:scale-95",children:r?"تحديث البيانات":"حفظ الخدمة"})]})]})]}),s.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[s.jsx("th",{className:"px-6 py-4 w-12 text-center",children:s.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600 rounded cursor-pointer",checked:b.length>0&&u.length===b.length,onChange:Q})}),s.jsx("th",{className:"px-6 py-4 font-bold text-xs text-slate-500 uppercase tracking-wider",children:"الخدمة"}),s.jsx("th",{className:"px-6 py-4 font-bold text-xs text-slate-500 uppercase tracking-wider",children:"المنفذ / النسبة"}),s.jsx("th",{className:"px-6 py-4 font-bold text-xs text-slate-500 uppercase tracking-wider text-center",children:"التكلفة"}),s.jsx("th",{className:"px-6 py-4 font-bold text-xs text-slate-500 uppercase tracking-wider text-center",children:"البيع"}),s.jsx("th",{className:"px-6 py-4 font-bold text-xs text-slate-500 uppercase tracking-wider text-center",children:"صافي الربح"}),s.jsx("th",{className:"px-6 py-4 font-bold text-xs text-slate-500 uppercase tracking-wider text-center",children:"إجراءات"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[b.map(e=>s.jsxs("tr",{id:`service-${e.id}`,className:`hover:bg-slate-50 bg-opacity-80 transition-all group ${Y===e.id?"ring-4 ring-indigo-500 border-indigo-500 bg-indigo-50/30 scale-[1.002] z-10 shadow-2xl":""}`,children:[s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600 rounded cursor-pointer",checked:u.includes(e.id),onChange:()=>W(e.id)})}),s.jsxs("td",{className:"px-6 py-5",children:[s.jsx("div",{className:"font-bold text-slate-900 text-lg",children:e.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-1",children:[e.refNo?s.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(e.refNo);const a=document.getElementById(`ref-srv-${e.id}`);if(a){const o=a.innerText;a.innerText="تم النسخ",setTimeout(()=>{a.innerText=o},1e3)}},id:`ref-srv-${e.id}`,className:"text-[10px] text-indigo-600 font-bold uppercase tracking-widest bg-indigo-50 px-2 py-0.5 rounded border border-indigo-100 hover:bg-indigo-100 transition-all",title:"اضغط للنسخ والبحث",children:["Ref: #",e.refNo]}):s.jsxs("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:["Ref: #",(e.id||"").toString().slice(-6).toUpperCase()]}),s.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-2",children:[s.jsx(E,{size:12})," ",e.date]})]})]}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-slate-100 text-slate-700 text-xs font-bold rounded-lg w-fit",children:[s.jsx(O,{size:12,className:"text-slate-400"}),(c||[]).find(a=>a.id===e.employeeId)?.name||"---"]}),s.jsxs("span",{className:"text-[10px] text-indigo-600 font-bold px-1",children:["عمولة: ",m?"****":e.employeeCommissionRate||0,"%"]})]})}),s.jsx("td",{className:"px-6 py-5 text-center text-rose-600 font-bold",children:z?"****":p((e.purchasePrice||0)*(e.exchangeRate||1))}),s.jsx("td",{className:"px-6 py-5 text-center text-emerald-600 font-bold",children:m?"****":p((e.sellingPrice||0)*(e.exchangeRate||1))}),s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsx("span",{className:"px-4 py-2 bg-slate-900 text-emerald-400 rounded-xl font-bold text-lg inline-block min-w-[120px]",children:z?"****":p(((e.sellingPrice||0)-(e.purchasePrice||0))*(e.exchangeRate||1))})}),s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx("button",{onClick:()=>K(e),className:"p-2.5 bg-slate-100 text-slate-500 hover:bg-slate-900 hover:text-indigo-400 rounded-xl transition-all",title:"تعديل",children:s.jsx(oe,{size:16})}),d.role==="ADMIN"&&s.jsx("button",{onClick:()=>k(e.id),className:"p-2.5 bg-rose-50 text-rose-500 hover:bg-rose-600 hover:text-white rounded-xl transition-all",title:"حذف",children:s.jsx(D,{size:16})})]})})]},e.id)),b.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-slate-400 font-medium",children:"لا توجد خدمات مسجلة تطابق البحث"})})]})]})})})]})};export{ge as default};
